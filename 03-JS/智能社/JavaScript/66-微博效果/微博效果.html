<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>微博效果</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #ull {
            width: 400px;
            height: 400px;
            border: 1px solid black;
            margin: 10px auto;
             overflow: hidden; 
        }
        #ull li {
            border-bottom: 1px #999 dashed;
            padding: 4px;
            list-style: none;
            overflow: hidden; 
            filter: alpha(opacity=0);
            opacity: 0;
            word-wrap:break-word
        }

    </style>
</head>
<body>
    <textarea id="txt1" cols="40" rows="4"></textarea>
    <input type="button" value="发布" id="btn1">
    <ul id="ull">
        <li></li>
    </ul>

    <script src="move2.js"></script>
    <script>
        var oBtn = document.getElementById('btn1');
        var oTxt = document.getElementById('txt1');
        var oUl = document.getElementById('ull');
        
        oBtn.onclick = function() {
            //点击按钮时候，为ul里面添加li li里面的内容是oTxt里面的内容
            var oLi = document.createElement('li');
            oLi.innerHTML = oTxt.value;
            oTxt.value = '';
           // oUl.appendChild(oLi);
           //oUl 中添加节点 
           if(oUl.children.length>0){
               oUl.insertBefore(oLi,oUl.children[0]);
           } else{
               oUl.appendChild(oLi);
           }

           //运动
           var iHeight = oLi.offsetHeight;
           oLi.style.height='0'; //获取到了高度以后将高度清空
           //alert(iHeight);
           startMove(oLi,{height: iHeight},function(){
               startMove(oLi,{opacity: 100});
           });
        }
    </script>
</body>
</html>